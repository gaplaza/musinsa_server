# ========================================
# 테스트 환경 설정 (Test Profile)
# ========================================
spring:
  # DataSource 설정
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3306}/${DB_NAME:musinsa_test}?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul&characterEncoding=UTF-8
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:}
    
    # HikariCP 설정 (테스트 환경)
    hikari:
      pool-name: HikariCP-Test
      maximum-pool-size: 5  # 테스트는 더 작게
      minimum-idle: 2
      connection-timeout: 10000
      idle-timeout: 300000
      max-lifetime: 600000
      auto-commit: false

  # JPA 테스트 환경 설정
  jpa:
    hibernate:
      ddl-auto: create-drop  # 테스트 시작 시 생성, 종료 시 삭제
      naming:
        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
    show-sql: true  # 테스트 SQL 확인용
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect
        format_sql: true
        generate_statistics: false  # 테스트에서는 통계 불필요

  # MyBatis 테스트 환경 설정
  mybatis:
    configuration:
      log-impl: org.apache.ibatis.logging.nologging.NoLoggingImpl  # 로깅 최소화
      cache-enabled: false  # 캐시 비활성화
      local-cache-scope: STATEMENT

  # 정적 리소스 비활성화
  web:
    resources:
      add-mappings: false

# ========================================
# 테스트 환경 로깅 설정 (최소화)
# ========================================
logging:
  level:
    root: warn
    com.mudosa.musinsa: info
    
    # JPA 로깅 최소화
    org.hibernate.SQL: info
    org.hibernate.type: warn
    
    # MyBatis 로깅 최소화
    com.mudosa.musinsa.domain: info
    
    # Spring 로깅 최소화
    org.springframework: warn
    org.springframework.web: info
    org.springframework.security: warn
    
    # HikariCP 로깅 최소화
    com.zaxxer.hikari: warn

# ========================================
# JWT 테스트 환경 설정
# ========================================
jwt:
  secret: test-musinsa-secret-key-for-testing-environment-minimum-256-bits-required-1234567890
  access-token-expiration: 3600000  # 1시간
  refresh-token-expiration: 604800000  # 7일

# ========================================
# Swagger 테스트 환경 설정
# ========================================
springdoc:
  swagger-ui:
    enabled: false  # 테스트에서는 Swagger 비활성화
  api-docs:
    enabled: false

# ========================================
# Server 테스트 환경 설정
# ========================================
server:
  error:
    include-stacktrace: never
    include-exception: false

# ========================================
# Management / Actuator (테스트 환경)
# ========================================
management:
  endpoints:
    web:
      exposure:
        include: health
  endpoint:
    health:
      show-details: never
